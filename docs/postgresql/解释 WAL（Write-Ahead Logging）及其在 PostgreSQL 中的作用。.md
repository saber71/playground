预写日志，一种用于保障数据库事务持久性和崩溃恢复能力的核心机制
在对数据库中的数据页进行修改前，会先将该修改操作写进日志里持久化存储

核心原则：
- 确保事务的修改要么完全生效，要么全不生效
- 日志以追加的形式写入，比随机写入数据页更高效
- 系统重启时，pg会读取日志，重做未刷盘的事务，撤销未提交的事务

作用：
- 数据库崩溃后恢复数据，从最近的检查点开始重放日志中的记录
- 实现流复制，主库将日志实时发送给备库，备库通过重放实现数据同步
- 实现时间点恢复，结合基础备份和归档的WAL文件，将数据库恢复到任意历史时间点
- WAL是顺序写入，数据页的更新可以延迟刷盘，减少IO压力，提升整体写入吞吐量
- 支持MVCC与事务可见性，WAL记录了每个事务对元组的插入、更新、删除操作，确保数据恢复时正确重建数据版本

PG中的WAL关键概念
- WAL段文件，默认每个16MB，存放在pg_wal/目录
- LSN，唯一标识WAL中每个记录的位置，用于同步主备库和恢复定位
- Checkpoint，定期将脏页写入硬盘，并记录位一个恢复起点，减少恢复时需要重放的日志量
- wal_level，控制WAL记录的详细成都，影响是否支持流复制或逻辑解码
- archive_mode/archive_command，用将WAL文件归档