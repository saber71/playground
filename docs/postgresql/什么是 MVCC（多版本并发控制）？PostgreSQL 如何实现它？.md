MVCC，为每个事务提供数据的一个快照视图，而不是直接修改或锁定原始数据行，避免读写阻塞，提升并发性能
但因为旧版本数据不会立即删除，导致表和索引变大，会定期执行清理操作
因为事务id是32位，如果用完会回卷，其要求每20亿事务执行一次清理操作

传统的锁机制在加锁时会阻塞读或写，读操作可能会被写阻塞导致等待
MVCC允许读不阻塞写、写不阻塞读、多个事务可以同时读取同一数据的不同版本

pg会在每张表的每一行中隐式添加两个系统字段来实现MVCC，xmin（创建该行版本的事务id），xmax（删除或更新该行的事务id，未删除则为0）

每次更新或删除不会立即覆盖或物理删除原数据，而是在更新时生成一行新版本，旧版本保留；删除时标记旧行的xmax为当前事务id，表示逻辑删除
每个事务启动时获得一个唯一的事务id，根据隔离级别决定他能看到哪些数据版本
可见性判断：xmin是已提交的事务，且xmin<=当前事务的快照；xmax为0或xmax是未提交/回滚的事务

快照：
事务开始时，pg会记录当前活跃事务列表（未提交的事务id）、下一个将分配的事务id
该快照决定了事务能看到哪些数据版本

